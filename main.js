!function(e){var t={};function i(s){if(t[s])return t[s].exports;var h=t[s]={i:s,l:!1,exports:{}};return e[s].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var h in e)i.d(s,h,function(t){return e[t]}.bind(null,h));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){var s,h,a;"undefined"!=typeof self&&self,h=[],void 0===(a="function"==typeof(s=function(){var e=document,t=e.getElementsByTagName("head")[0],i=null,s=function(i){var s=e.createElement("link");s.type="image/x-icon",s.rel="icon",s.href=i,h(),t.appendChild(s)},h=function(){for(var e=t.getElementsByTagName("link"),i=0;i<e.length;i++)/\bicon\b/i.test(e[i].getAttribute("rel"))&&t.removeChild(e[i])};return{defaultPause:2e3,change:function(t,h){clearTimeout(i),h&&(e.title=h),""!==t&&s(t)},animate:function(e,t){clearTimeout(i),e.forEach(function(e){(new Image).src=e}),t=t||this.defaultPause;var h=0;s(e[h]),i=setTimeout(function a(){h=(h+1)%e.length,s(e[h]),i=setTimeout(a,t)},t)},stopAnimate:function(){clearTimeout(i)}}})?s.apply(t,h):s)||(e.exports=a)},function(e,t,i){"use strict";i.r(t);var s=class{constructor(){this.canvas=document.getElementsByTagName("canvas")[0],this.canvasContext=this.canvas.getContext("2d"),this.canvasHeight=this.canvas.height,this.canvasWidth=this.canvas.width,this.numOfColumns=10,this.numOfRows=20,this.tileHeight=this.canvasHeight/this.numOfRows,this.tileWidth=this.canvasWidth/this.numOfColumns,this.canvasContext.font="30px Arial",this.canvasContext.fillStyle="white",this.canvasContext.textAlign="center",this.audioEnabled=!1,this.canvasContext.fillText("Press Z to Play!",this.canvasWidth/2,this.canvasHeight/2),this.matrix=[],this.pieces=[[0,1,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,1,1],[0,1,0,0,1,1,1],[1,1,1,0,0,0,1],[1,1,1,0,1],[1,1,1,1]],this.piecesNames=["S piece","Z piece","Square piece","T piece","J piece","L piece","Line piece"],this.colors=["#00F000","#F02300","#d1d100","#9F35F0","#022FF0","#F0A000","#00F0F0"],this.drawTile=this.drawTile.bind(this),this.render=this.render.bind(this),this.stopFalling=this.stopFalling.bind(this),this.frame=this.frame.bind(this),this.randomPiece=this.randomPiece.bind(this),this.clear=this.clear.bind(this),this.testx=0,this.testy=0,this.activeColorBack="white",this.lost=!1,this.activePiece=[],this.activeX=5,this.activeY=0,this.sizeOfPiece=4,this.pieceType=0,this.piece=[],this.notFalling=!1,this.keyPress=this.keyPress.bind(this),this.KeyHashing=this.KeyHashing.bind(this),document.body.onkeydown=this.KeyHashing,this.deleteLines=this.deleteLines.bind(this),this.notZero=this.notZero.bind(this),this.deleteAndMoveLine=this.deleteAndMoveLine.bind(this),this.putScore.bind(this),this.rotate=this.rotate.bind(this),this.handleSavePiece=this.handleSavePiece.bind(this),this.playMusic=this.playMusic.bind(this),this.renderSavedPiece=this.renderSavedPiece.bind(this),this.drawPreviewTile=this.drawPreviewTile.bind(this),this.score=0,this.putScore()}drawTile(e,t){this.canvasContext.fillRect(this.tileWidth*e,this.tileHeight*t,this.tileWidth-2,this.tileHeight-2),this.canvasContext.strokeRect(this.tileWidth*e,this.tileHeight*t,this.tileWidth-2,this.tileHeight-2)}render(){this.canvasContext.strokeStyle="silver",this.canvasContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.canvasContext.fillStyle="white",this.canvasContext.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(let e=0;e<this.numOfColumns;e++)for(let t=0;t<this.numOfRows;t++)this.matrix[t][e]&&(this.canvasContext.fillStyle=this.colors[this.matrix[t][e]-1],this.drawTile(e,t));this.canvasContext.strokeStyle="silver";for(let e=0;e<this.sizeOfPiece;e++)for(let t=0;t<this.sizeOfPiece;t++)this.activePiece[e][t]&&(this.canvasContext.fillStyle=this.colors[this.activePiece[e][t]-1],this.drawTile(this.activeX+t,this.activeY+e))}renderSavedPiece(e,t){this.previewArrays=[[[0,0,0,0],[0,0,0,0],[0,1,1,0],[1,1,0,0]],[[0,0,0,0],[0,0,0,0],[0,1,1,0],[0,0,1,1]],[[0,0,0,0],[0,0,0,0],[0,1,1,0],[0,1,1,0]],[[0,0,0,0],[0,0,0,0],[0,0,1,0],[0,1,1,1]],[[0,0,0,0],[0,0,1,0],[0,0,1,0],[0,1,1,0]],[[0,0,0,0],[1,0,0,0],[1,0,0,0],[1,1,0,0]],[[1,0,0,0],[1,0,0,0],[1,0,0,0],[1,0,0,0]]],this.PreviewMatrix=this.previewArrays[e],this.canvasPreview=document.getElementsByTagName("canvas")[1],this.canvasContextPreview=this.canvasPreview.getContext("2d"),this.canvasPreviewHeight=this.canvasPreview.height,this.canvasPreviewWidth=this.canvasPreview.width,this.PreviewNumOfColumns=4,this.PreviewNumOfRows=4,this.PreviewtileHeight=this.canvasPreviewHeight/this.PreviewNumOfRows,this.PreviewtileWidth=this.canvasPreviewWidth/this.PreviewNumOfColumns,this.canvasContextPreview.fillStyle="white",this.canvasContextPreview.strokeStyle="silver",this.canvasContextPreview.clearRect(0,0,this.canvasPreviewWidth,this.canvasPreviewHeight);for(let e=0;e<this.PreviewNumOfColumns;e++)for(let i=0;i<this.PreviewNumOfRows;i++)this.PreviewMatrix[i][e]&&(this.canvasContextPreview.fillStyle=this.colors[t],this.drawPreviewTile(e,i))}drawPreviewTile(e,t){this.canvasContextPreview.fillRect(this.PreviewtileWidth*e,this.PreviewtileHeight*t,this.PreviewtileWidth-2,this.PreviewtileHeight-2),this.canvasContextPreview.strokeRect(this.PreviewtileWidth*e,this.PreviewtileHeight*t,this.PreviewtileWidth-2,this.PreviewtileHeight-2)}randomPiece(e,t){void 0===e?(this.pieceType=Math.floor(Math.random()*this.pieces.length),this.piece=this.pieces[this.pieceType]):(this.pieceType=t,this.piece=e);for(let e=0;e<this.sizeOfPiece;e++){this.activePiece[e]=[];for(let t=0;t<this.sizeOfPiece;t++){let i=4*e+t;void 0!==this.piece[i]&&this.piece[i]?this.activePiece[e][t]=this.pieceType+1:this.activePiece[e][t]=0}}this.notFalling=!1,this.activeX=5,this.activeY=0}clear(){for(let e=0;e<this.numOfRows;e++){this.matrix[e]=[];for(let t=0;t<this.numOfColumns;t++)this.matrix[e][t]=0}}stopFalling(){for(let e=0;e<this.sizeOfPiece;e++)for(let t=0;t<this.sizeOfPiece;t++)this.activePiece[e][t]&&(this.matrix[e+this.activeY][t+this.activeX]=this.activePiece[e][t]);this.notFalling=!0}resetGame(){this.resetIntervals(),this.reRender=setInterval(this.render,40),this.clear(),this.randomPiece(),this.lost=!1,this.score=0,this.putScore(),this.frameInterval=setInterval(this.frame,500),this.playMusic()}playMusic(){this.themeMusic&&this.themeMusic.pause(),this.audioEnabled&&(this.themeMusic=new Audio("./music/Tetristheme.mp3"),this.themeMusic.volume=.2,this.themeMusic.play())}resetIntervals(){clearInterval(this.frameInterval),clearInterval(this.reRender)}frame(){this.collisionCheck(0,1)?this.activeY++:(this.stopFalling(),this.collisionCheck(0,1),this.deleteLines(),this.lost&&(this.resetIntervals(),this.canvasContext.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.canvasContext.fillStyle="white",this.canvasContext.fillText("Press Z to Play Again!",this.canvasWidth/2,this.canvasHeight/2)),this.randomPiece())}rotate(e){let t=[];for(let i=0;i<this.sizeOfPiece;i++){t[i]=[];for(let s=0;s<this.sizeOfPiece;s++)t[i][s]=e[3-s][i]}return t}KeyHashing(e){const t={90:"z",38:"up",87:"up",81:"up",69:"up",40:"down",83:"down",37:"left",65:"left",39:"right",68:"right",32:"space",16:"save",77:"music"};void 0!==t[e.keyCode]&&this.keyPress(t[e.keyCode])}keyPress(e){if("up"===e&&this.collisionCheck(0,0,this.rotate(this.activePiece)))this.activePiece=this.rotate(this.activePiece);else if("down"===e&&this.collisionCheck(0,1))this.activeY++;else if("left"===e&&this.collisionCheck(-1,0))this.activeX--;else if("right"===e&&this.collisionCheck(1,0))this.activeX++;else if("space"===e){for(;this.collisionCheck(0,1);)this.activeY++;this.render()}else"z"===e?this.resetGame():"save"===e?this.handleSavePiece():"music"===e&&(this.audioEnabled=!this.audioEnabled,this.playMusic())}handleSavePiece(){this.savedPiece?(this.oldPiece=this.piece,this.oldPieceType=this.pieceType,this.randomPiece(this.savedPiece,this.savedId),this.savedPiece=this.oldPiece,this.savedId=this.oldPieceType):(this.savedPiece=this.piece,this.savedId=this.pieceType,this.randomPiece()),this.renderSavedPiece(this.savedId,this.savedId)}collisionCheck(e=0,t=0,i=this.activePiece){e=this.activeX+e,t=this.activeY+t;for(let s=0;s<this.sizeOfPiece;s++)for(let h=0;h<this.sizeOfPiece;h++)if(i[s][h]&&(void 0===this.matrix[s+t]||void 0===this.matrix[s+t][h+e]||this.matrix[s+t][h+e]||h+e<0||s+t>=this.numOfRows||h+e>=this.numOfColumns))return this.notFalling&&1==t&&(this.lost=!0,console.log("lost")),!1;return!0}notZero(e){return 0!==e}deleteAndMoveLine(e){for(let t=e;t>0;t--)for(let e=0;e<this.numOfColumns;e++)this.matrix[t][e]=this.matrix[t-1][e]}deleteLines(){for(let e=this.numOfRows-1;e>=0;e--)this.matrix[e].every(this.notZero)&&(this.deleteAndMoveLine(e),this.score++,this.putScore(),e++,this.audioEnabled&&(this.linecleareffect||(this.linecleareffect=new Audio("./music/line.wav")),this.linecleareffect.play()))}putScore(){document.getElementById("score").textContent=this.score}};var h=class{constructor(){new s}},a=i(0);new h,Object(a.animate)(["data: image / png; base64, iVBORw0KGgoAAAANSUhEUgAAAJYAAAEsBAMAAADTCVd2AAAABGdBTUEAALGPC / xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAD1BMVEX/////46v/o0f4OAD///8MQsbnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjBAwAOBWZEILkAAABeElEQVR42u3bYbKCIBSGYW9tIGMDqRuQ2P/euuMdaQg4SKlc7P3+6eTzC5jDgZpGSBvOpXkjWFjrWz9tPNf+NzcsrPKWwLT9HCysL7JyV38srC0t48SO9MF5mpIe91hYFVjS18Os33svNyys8lbk60CwsPaxzpFV2beGCI+FdQir94lIRncqYmHtY0krPBZWeSuw53urvMHCqtNKTauM4xwsrM2twJmhmlHtd6BP0gTAwqrB8ssYbUH31fTzdCMGC2t9S9giPkFln4x0nIKFtZF1Nolob7E27vUMLKwvsmy9Pr3Cwipq6XBBbdxyJbbxxMJaz5KGu3+3s7OgbVGPy8obLKz/benld0Qzdp9YWJ9akVORDgsLK2X9FTtYWPtaXd56/yzosbA2texR3XJLRcpuLKyqLPe/gSpVmGNhlbXc7obyex1YWGUtqROXbEpjYR3Ciiz1F+EOKRZWMevlTlxGsLBqsfxJMTafBAsLCwsruFiPWFgHth5xUWXa470iagAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNC0xMVQyMjo1NjoyMSswMjowMKeUI54AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDQtMTFUMjI6NTY6MjErMDI6MDDWyZsiAAAAAElFTkSuQmCC","data: image / png; base64, iVBORw0KGgoAAAANSUhEUgAAAJYAAAEsBAMAAADTCVd2AAAABGdBTUEAALGPC / xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAD1BMVEX/////46v/o0f4OAD///8MQsbnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjBAwAOBWZEILkAAABS0lEQVR42u3bQQ7CIBCFYY0XaOUCpr1Atfe/m5ZElAjMsKBQ/N9KSfvFRUGgw+lECCFk15zHcLCwOrRixJbr9AoWVn1LZCYsrP+yxszRHwurpHVZv/NwT7r/TffwY2GVslJ3B/gkioV1XCt29ySCWFiFrMgIH7DmrQkLqyXLz5pIoPtgYR3BUoEzFlYjlr+IVM1IbroFKRZW25Zl7pFtaN0vwcIqbjnGeMO5bdo+LBmvHbGwKlg2rnnBwurG8juMCc+9P38DydEfC6u45S41qxB5jw8LaxdrfM9GsLC6tmz0VgDEwqpmiQM/FlanVqxHyYdPsLBqWbkHpbCw2rDk19pYWO1aqX28SIy30hywsFqzIhdgYbVkmd89u9DcBAurF2tIzVuwsKpai1RgIZfwY2EdxdIXFmFhVbN0xXTyGSksrJJWXo0yFlYX1hOrrVmoKyTYiQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNC0xMVQyMjo1NjoyMSswMjowMKeUI54AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDQtMTFUMjI6NTY6MjErMDI6MDDWyZsiAAAAAElFTkSuQmCC","data: image / png; base64, iVBORw0KGgoAAAANSUhEUgAAAJYAAAEsBAMAAADTCVd2AAAABGdBTUEAALGPC / xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAD1BMVEX/////46v/o0f4OAD///8MQsbnAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAHdElNRQfjBAwAOBWZEILkAAABUElEQVR42u3aXQ6DIBBGURs3UGQDVjdQdf97azVRQ3HwLyjQ+72ZyHkbMo6TZYQkELWcJxZWGNZDySmqb0osrLQsB6OqMVhYgVt7b38srFiszshUNbXxNGS9hrCwPFmu0/Wot5WVEgvrfks4vRAsrPisXLjhbasWeCys26zKJoS8zfLBwvJpmS20dCtjYSVobQP3fkRiYXmyhH8nxc5RNBZWVFZfPk1/Wo/F1Ezg+g2PhXWJNbxmMHMmUGNhxWQNwcL6H2sGsbCCtBZm1VhYQVrtkZEJFlYElrL7D5c1vIqFdau1AEqWtNuJhRWnZU71TOu1utOMhXWxZVdBs23/HgvLp+UCtTD52NZMY2EFbtn/t7Vj7a7DwgrEOsVgYXm3TFDv2ObEworcysfptBIqCgsrJMs+nWNhJWrl5zsbLKxbrSO9CRaWT+tnPQMLKz3rA7oD91kewo9BAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA0LTExVDIyOjU2OjIxKzAyOjAwp5QjngAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNC0xMVQyMjo1NjoyMSswMjowMNbJmyIAAAAASUVORK5CYII="],15)}]);